// const whatWeDo = {
//     mainSection: 'whatWeDo',
//     sections: [
//       {
//         section: 'Offerings',
//         items: [
//           {
//             name: 'Product Development',
//             items: [
//               {
//                 name: 'Scalable Product Engineering',
//                 items: [{ name: 'Mobile devices'}],
//                 details: {
//                   imgUrl: 'https://example.com/scalable-product-engineering.jpg',
//                   header: 'Scalable Product Engineering',
//                   description: 'This is a description of Scalable Product Engineering.',
//                   extraContent: 'Additional content for Scalable Product Engineering.'
//                 }
//               },
//               { name: 'New Product Introduction',
//                 details: {
//                     imgUrl: 'https://example.com/scalable-product-engineering.jpg',
//                     header: 'New Product Introduction',
//                     description: 'This is a description of Scalable Product Engineering.',
//                     extraContent: 'Additional content for Scalable Product Engineering.'
//                 }
//               },
//               { name: 'Product Sustenance & Support' },
//               { name: 'Technical Debt Reduction' },
//               { name: 'Modern Data Platform',
//                 details: {
//                     imgUrl: 'https://example.com/scalable-product-engineering.jpg',
//                     header: 'Modern Data Platform',
//                     description: 'This is a description of New Product Introduction.',
//                     extraContent: 'Additional content for New Product Introduction.'
//                 }
//               }
//             ]
//           },
//           {
//             name: 'Enterprise Transformation',
//             items: [
//               { name: 'Enterprise AI' },
//               { name: 'AI-Driven Quality Engineering' },
//               {
//                 name: 'Cloud Engineering',
//                 items: [{name: 'Cloud Data'}],
//                 details: {
//                   imgUrl: 'https://example.com/cloud-engineering.jpg',
//                   header: 'Cloud Engineering',
//                   description: 'This is a description of Cloud Engineering.',
//                   extraContent: 'Additional content for Cloud Engineering.'
//                 }
//               },
//               { name: 'Modernizing Customer Experience' },
//               { name: 'Enterprise Security' }
//             ]
//           }
//         ]
//       },
//       {
//         section: 'Solutions',
//         items: [
//             {
//                 name: 'Accelerators',
//                 items: [
//                   {
//                     name: 'Data Lake Accerators',
//                     details: {
//                       imgUrl: 'https://example.com/scalable-product-engineering.jpg',
//                       header: 'Data Lake Accerator',
//                       description: 'This is a description of Data Lake Accerator',
//                       extraContent: 'Additional content for Data Lake Accerator'
//                     }
//                   },
//                   {
//                     name: 'Micro-Services'
//                   },
//                   {
//                     name: 'Product Sustenance & Support'
//                   },
//                   {
//                     name: 'Technical Debt Reduction'
//                   },
//                   {
//                     name: 'Modern Data Platform'
//                   }
//                 ]
//               },
//               {
//                 name: 'Enterprise Transformation',
//                 items: [
//                   {
//                     name: 'Enterprise AI'
//                   },
//                   {
//                     name: 'AI-Driven Quality Engineering'
//                   },
//                   {
//                     name: 'Cloud Engineering',
//                     details: {
//                       imgUrl: 'https://example.com/cloud-engineering.jpg',
//                       header: 'Cloud Engineering',
//                       description: 'This is a description of Cloud Engineering.',
//                       extraContent: 'Additional content for Cloud Engineering.'
//                     }
//                   },
//                   {
//                     name: 'Modernizing Customer Experience'
//                   },
//                   {
//                     name: 'Enterprise Security'
//                   }
//                 ]
//               }
//         ]
//       },
//       {
//         section: 'Industries',
//         items: [
//           {
//             name: 'Segments',
//             items: [
//               {
//                 name: 'Segments Product Engineering',
//                 details: {
//                   imgUrl: 'https://example.com/scalable-product-engineering.jpg',
//                   header: 'Segments Product Engineering',
//                   description: 'This is a description of Scalable Product Engineering.',
//                   extraContent: 'Additional content for Scalable Product Engineering.'
//                 }
//               },
//               {
//                 name: 'New Product Introduction'
//               },
//               {
//                 name: 'Product Sustenance & Support'
//               },
//               {
//                 name: 'Technical Debt Reduction'
//               },
//               {
//                 name: 'Modern Data Platform'
//               }
//             ]
//           }
//         ]
//     }
// ]
// };

const whatWeDo = {
  mainSection: 'whatWeDo',
  sections: [
    {
      section: 'Offerings',
      items: [
        {
          name: 'Product Development',
          items: [
            {
              name: 'Scalable Product Engineering',
              url:'https://staging.innominds.com/services/software-product-and-digital-engineering'
//                 details: {
//                   imgUrl: 'https://2535467.fs1.hubspotusercontent-na1.net/hubfs/2535467/Close%20up%20of%20businesswoman%20holding%20graphs%20in%20hand-1.jpeg',
//                   header: 'Scalable Product Engineering',
//                   description: 'Sed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium doloremque laudantium, totam rem aperiam, eaque ipsa quae ab illo inventore veritatis et quasi. consequuntur magni dolores eos qui ratione voluptatem sequi nesciunt. Neque porro quisquam est, qui dolorem ipsum quia dolor sit amet.',
//                   btn: 'Discover More.',
//                   btnLink:'https://staging.innominds.com/services/software-product-and-digital-engineering'
//                 }
//                  items: [{ name: 'Mobile devices'}],
            },
            { name: 'New Product Introduction',
             items: [
               { 
                 name: 'Connected Devices',
                 details: {
                   imgUrl: 'https://2535467.fs1.hubspotusercontent-na1.net/hubfs/2535467/Close%20up%20of%20businesswoman%20holding%20graphs%20in%20hand-1.jpeg',
                   header: 'Connected Devices',
                   description: 'Sed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium doloremque laudantium, totam rem aperiam, eaque ipsa quae ab illo inventore veritatis et quasi. consequuntur magni dolores eos qui ratione voluptatem sequi nesciunt. Neque porro quisquam est, qui dolorem ipsum quia dolor sit amet.',
                   btn: 'Discover More.',
                   btnLink:'https://staging.innominds.com/connected-devices-and-iot'
                 }
               },
               {
                 name: 'Rapid Application Development for Enterprise and ISV',
                 details: {
                   imgUrl: 'https://2535467.fs1.hubspotusercontent-na1.net/hubfs/2535467/Close%20up%20of%20businesswoman%20holding%20graphs%20in%20hand-1.jpeg',
                   header: 'Rapid Application Development for Enterprise and ISV',
                   description: 'Sed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium doloremque laudantium, totam rem aperiam, eaque ipsa quae ab illo inventore veritatis et quasi. consequuntur magni dolores eos qui ratione voluptatem sequi nesciunt. Neque porro quisquam est, qui dolorem ipsum quia dolor sit amet.',
                   btn: 'Discover More.',
                   btnLink:'https://staging.innominds.com/services/software-product-and-digital-engineering/rapid-application-development-for-enterprises-and-isvs'
                 }
               }
             ]
            },
            { name: 'Product Sustenance & Support',
             items: [
                { 
                 name: 'Mobile Application Development and Engineering',
                 details: {
                   imgUrl: 'https://2535467.fs1.hubspotusercontent-na1.net/hubfs/2535467/Close%20up%20of%20businesswoman%20holding%20graphs%20in%20hand-1.jpeg',
                   header: 'Mobile Application Development and Engineering',
                   description: 'Sed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium doloremque laudantium, totam rem aperiam, eaque ipsa quae ab illo inventore veritatis et quasi. consequuntur magni dolores eos qui ratione voluptatem sequi nesciunt. Neque porro quisquam est, qui dolorem ipsum quia dolor sit amet.',
                   btn: 'Discover More.',
                   btnLink:'https://staging.innominds.com/mobile-application-development-and-engineering'
                 }
                },
               {
                 name: 'Software Products and Didital Engineering',
                 details: {
                   imgUrl: 'https://2535467.fs1.hubspotusercontent-na1.net/hubfs/2535467/Close%20up%20of%20businesswoman%20holding%20graphs%20in%20hand-1.jpeg',
                   header: 'Software Products and Didital Engineering',
                   description: 'Sed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium doloremque laudantium, totam rem aperiam, eaque ipsa quae ab illo inventore veritatis et quasi. consequuntur magni dolores eos qui ratione voluptatem sequi nesciunt. Neque porro quisquam est, qui dolorem ipsum quia dolor sit amet.',
                   btn: 'Discover More.',
                   btnLink:'https://staging.innominds.com/services/software-product-and-digital-engineering'
                 }
               }
             ]
            },
            { name: 'Technical Debt Reduction' },
            { name: 'Modern Data Platform',
             url:'https://staging.innominds.com/data-and-analytics-engineering'
//                 details: {
//                     imgUrl: 'https://2535467.fs1.hubspotusercontent-na1.net/hubfs/2535467/Close%20up%20of%20businesswoman%20holding%20graphs%20in%20hand-1.jpeg',
//                     header: 'Modern Data Platform',
//                     description: 'Sed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium doloremque laudantium, totam rem aperiam, eaque ipsa quae ab illo inventore veritatis et quasi. consequuntur magni dolores eos qui ratione voluptatem sequi nesciunt. Neque porro quisquam est, qui dolorem ipsum quia dolor sit amet.',
//                     btn: 'Discover More.',
//                     btnLink:'https://staging.innominds.com/data-and-analytics-engineering'
//                 }
            }
          ]
        },
        {
          name: 'Enterprise Transformation',
          items: [
            { name: 'Enterprise AI',
             url:'https://staging.innominds.com/generative-ai'
//                details: {
//                     imgUrl: 'https://2535467.fs1.hubspotusercontent-na1.net/hubfs/2535467/Close%20up%20of%20businesswoman%20holding%20graphs%20in%20hand-1.jpeg',
//                     header: 'Enterprise AI',
//                     description: 'Sed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium doloremque laudantium, totam rem aperiam, eaque ipsa quae ab illo inventore veritatis et quasi. consequuntur magni dolores eos qui ratione voluptatem sequi nesciunt. Neque porro quisquam est, qui dolorem ipsum quia dolor sit amet.',
//                     btn: 'Discover More.',
//                     btnLink:'https://staging.innominds.com/generative-ai'
//                 }
            },
            { name: 'AI-Driven Quality Engineering',
             url:'https://staging.innominds.com/quality-engineering'
//                details: {
//                     imgUrl: 'https://2535467.fs1.hubspotusercontent-na1.net/hubfs/2535467/Close%20up%20of%20businesswoman%20holding%20graphs%20in%20hand-1.jpeg',
//                     header: 'AI-Driven Quality Engineering',
//                     description: 'Sed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium doloremque laudantium, totam rem aperiam, eaque ipsa quae ab illo inventore veritatis et quasi. consequuntur magni dolores eos qui ratione voluptatem sequi nesciunt. Neque porro quisquam est, qui dolorem ipsum quia dolor sit amet.',
//                     btn: 'Discover More.',
//                     btnLink:'https://staging.innominds.com/quality-engineering'
//                 }
            },
            {
              name: 'Cloud Engineering',
              items: [
                { name: 'Cloud Engineering',
                 details: {
                  imgUrl: 'https://2535467.fs1.hubspotusercontent-na1.net/hubfs/2535467/Close%20up%20of%20businesswoman%20holding%20graphs%20in%20hand-1.jpeg',
                  header: 'Cloud Engineering',
                  description: 'Sed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium doloremque laudantium, totam rem aperiam, eaque ipsa quae ab illo inventore veritatis et quasi. consequuntur magni dolores eos qui ratione voluptatem sequi nesciunt. Neque porro quisquam est, qui dolorem ipsum quia dolor sit amet.',
                  btn: 'Discover More.',
                  btnLink:'https://staging.innominds.com/services/software-product-and-digital-engineering/cloud-engineering'
                }
               },
                { name: 'Devops and Continous Engineering',
                 details: {
                  imgUrl: 'https://2535467.fs1.hubspotusercontent-na1.net/hubfs/2535467/Close%20up%20of%20businesswoman%20holding%20graphs%20in%20hand-1.jpeg',
                  header: 'AI-Driven Quality Engineering',
                  description: 'Sed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium doloremque laudantium, totam rem aperiam, eaque ipsa quae ab illo inventore veritatis et quasi. consequuntur magni dolores eos qui ratione voluptatem sequi nesciunt. Neque porro quisquam est, qui dolorem ipsum quia dolor sit amet.',
                  btn: 'Discover More.',
                  btnLink:'https://staging.innominds.com/services/devops-and-continuous-engineering'
                }
               }
              ]
            },
            { name: 'Modernizing Customer Experience',
             url:'https://staging.innominds.com/whatweoffer-/experience-engineering/ux-ui'
//                details: {
//                     imgUrl: 'https://2535467.fs1.hubspotusercontent-na1.net/hubfs/2535467/Close%20up%20of%20businesswoman%20holding%20graphs%20in%20hand-1.jpeg',
//                     header: 'Modernizing Customer Experience',
//                     description: 'Sed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium doloremque laudantium, totam rem aperiam, eaque ipsa quae ab illo inventore veritatis et quasi. consequuntur magni dolores eos qui ratione voluptatem sequi nesciunt. Neque porro quisquam est, qui dolorem ipsum quia dolor sit amet.',
//                     btn: 'Discover More.',
//                     btnLink:'https://staging.innominds.com/whatweoffer-/experience-engineering/ux-ui'
//                   }
            },
            { name: 'Enterprise Security',
             url:'https://staging.innominds.com/enterprise-security-services'
//                details: {
//                     imgUrl: 'https://2535467.fs1.hubspotusercontent-na1.net/hubfs/2535467/Close%20up%20of%20businesswoman%20holding%20graphs%20in%20hand-1.jpeg',
//                     header: 'Modernizing Customer Experience',
//                     description: 'Sed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium doloremque laudantium, totam rem aperiam, eaque ipsa quae ab illo inventore veritatis et quasi. consequuntur magni dolores eos qui ratione voluptatem sequi nesciunt. Neque porro quisquam est, qui dolorem ipsum quia dolor sit amet.',
//                     btn: 'Discover More.',
//                     btnLink:'https://staging.innominds.com/enterprise-security-services'
//                 }
            }
          ]
        }
      ]
    },
    {
      section: 'Solutions',
      items: [
          {
              name: 'Accelerators',
              items: [
                {
                  name: 'Data Lake Accerators',
                  details: {
                    imgUrl: 'https://2535467.fs1.hubspotusercontent-na1.net/hubfs/2535467/Businesswoman%20hand%20touch%20cube%20as%20symbol%20of%20problem%20solving.jpeg',
//                       header: 'Data Lake Accerator',
                    description: 'Sed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium doloremque laudantium, totam rem aperiam, eaque ipsa quae ab illo inventore veritatis et quasi. consequuntur magni dolores eos qui ratione voluptatem sequi nesciunt. Neque porro quisquam est, qui dolorem ipsum quia dolor sit amet.',
                    btn: 'Discover More.',
                    btnLink:'https://www.innominds.com/generative-ai'
                  }
                },
                {
                  name: 'Micro- services Accelerator'
                },
                {
                  name: 'Automated Test Management Accelerator'
                },
                {
                  name: 'Data Labelling & Annotation Accelerator'
                },
                {
                  name: 'SOM'
                }
              ]
            },
            {
              name: 'AI Powered',
              items: [
                {
                  name: 'Chatbot'
                },
                {
                  name: 'Computer Vision as a Service (CVAS)'
                },
                {
                  name: 'Logistics',
                  details: {
                    imgUrl: 'https://example.com/cloud-engineering.jpg',
                    header: 'Cloud Engineering',
                    description: 'This is a description of Cloud Engineering.',
                    extraContent: 'Additional content for Cloud Engineering.'
                  }
                },
                {
                  name: 'e-Commerce'
                },
                {
                  name: 'Edge AI + Vision Device'
                }
              ]
            }
      ]
    },
    {
      section: 'Industries',
      items: [
        {
          name: 'Segments',
          items: [
            {
              name: 'High Tech Software & Internet',
              details: {
                imgUrl: 'https://2535467.fs1.hubspotusercontent-na1.net/hubfs/2535467/Industrial%20port%20at%20dawn%20at%20the%20Port%20of%20Casablanca%2c%20Morocco.-1.jpeg',
//                   header: 'Segments Product Engineering',
                 description: 'Sed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium doloremque laudantium, totam rem aperiam, eaque ipsa quae ab illo inventore veritatis et quasi. consequuntur magni dolores eos qui ratione voluptatem sequi nesciunt. Neque porro quisquam est, qui dolorem ipsum quia dolor sit amet.',
                 btn: 'Discover More.',
                 btnLink:'https://www.innominds.com/generative-ai'
              }
            },
            {
              name: 'Construction Tech'
            },
            {
              name: 'Med Tech'
            },
            {
              name: 'Connected Vehicle (Automotive)'
            },
            {
              name: 'Healthcare (Pharma / Life Sciences)'
            },
            {
              name: 'Digital & Online Commerce'
            },
            {
              name: 'Connected Factory / Industry 4.0'
            },
            {
              name: 'Fin Tech'
            },
            {
              name: 'Transportation & Supply Chain'
            }
          ]
        }
      ]
  }
]
};

console.log("check whatWeDo",whatWeDo);

  // function showMegaMenu() {
  //   const megaMenu = document.querySelector('.mega-menu');
  //   if (megaMenu.style.display === 'none' || megaMenu.style.display === '') {
  //       megaMenu.style.display = 'block';
  //   } else {
  //       megaMenu.style.display = 'none';
  //   }
    
  //   const megaMenuItems = document.querySelector('.mega-menu-left .mega-menu-items');
  //   megaMenuItems.innerHTML = '';

  //   // Create the ul element outside the loop
  //   const ulElement = document.createElement('ul');

  //   whatWeDo.sections.forEach((section, index) => {
  //     const liElement = document.createElement('li');    
  //     const aElement = document.createElement('a');    
  //     const spanElement = document.createElement('span');

  //     if (section.items && section.items.length > 0) {
  //       aElement.textContent = `${section.section}`;
  //       spanElement.textContent = ' >';
  //     } else {
  //       aElement.textContent = section.section;
  //     }
      
  //     if (index === 0) {
  //       aElement.classList.add('activeEle');
  //     }
  //     liElement.appendChild(aElement);
  //     liElement.appendChild(spanElement);  

  //     liElement.addEventListener('click', () => showSubMenu(section));
  //     ulElement.appendChild(liElement);
  //   });

  //   megaMenuItems.appendChild(ulElement);

  //   // Initially show the submenu for the first item
  //   whatWeDo.sections && showSubMenu(whatWeDo.sections[0]);
  // }

  // function showSubMenu(section) {
  //   const megaSubMenuItems = document.querySelector('.mega-menu-left .mega-sub-menu-items');
  //   megaSubMenuItems.innerHTML = '';

  //   section.items.forEach(item => {
  //     const subMenuItem = document.createElement('h5');
  //     subMenuItem.textContent = item.name;
  //     megaSubMenuItems.appendChild(subMenuItem);
      
  //     if (item.items && item.items.length > 0) {
  //         const itemList = document.createElement('ul');
  //         item.items.forEach(subItem => {
  //             const listItem = document.createElement('li');
  //             listItem.textContent = subItem.name;
  //             itemList.appendChild(listItem);
  //             listItem.addEventListener('click', () => showAsideItems(subItem));
  //       });
  //       megaSubMenuItems.appendChild(itemList);
  //     }


  //   });

  //   if (section.items[0].items && section.items[0].items.length > 0) {
  //       showAsideItems(section.items[0].items[0]);
  //     }
  // }

  // function showAsideItems(item) {
  //   console.log("item", item);
  //   const megaAsideItems = document.querySelector('.mega-menu .mega-aside-items');
  //   megaAsideItems.innerHTML = '';

  //   if (item.details) {
  //     const detailsItem = document.createElement('div');
  //     const imgEle = document.createElement('img');
  //     const descEle = document.createElement('p');
  //     const btnEle = document.createElement('button');
  //     const titleEle = document.createElement('h5')
  //     titleEle.textContent = item.details.header;
  //     imgEle.src = item.details.imgUrl;
  //     descEle.textContent = item.details.description;
  //     detailsItem.appendChild(titleEle);
  //     detailsItem.appendChild(imgEle);
  //     detailsItem.appendChild(descEle);
  //     megaAsideItems.appendChild(detailsItem);
  //   }

  // }

  // document.body.addEventListener('click', function(event) {
  //   const megaMenu = document.querySelector('.mega-menu');
  //   const whatWeDo = document.querySelector('.has_click_menu')
  //   const isClickInsideMegaMenu = megaMenu.contains(event.target);
  
  //   if (!isClickInsideMegaMenu) {
  //       // if(megaMenu.style.display = 'block'){
  //       //     megaMenu.style.display = 'none';
  //       // }else{
  //       //     megaMenu.style.display = 'block';
  //       // }
  //   }
  // });


  $(document).ready(function() {
    const megaMenuEle = $('#hasOpenMegaMenu');
    megaMenuEle && megaMenuEle.on('click', showMegaMenu);
    $("#hasOpenMegaMenu").click(function() {
      $(".mega-menu").toggle();
    });
    console.log('check menu', megaMenuEle);
    function showMegaMenu() {
        console.log("checking showMegaMenu");
 
 
        const megaMenuItems = $('.mega-menu-left .mega-menu-items');
        megaMenuItems.empty();
 
        const ulElement = $('<ul>');
 
        whatWeDo.sections.forEach((section, index) => {
            const liElement = $('<li>');
            const aElement = $('<a>');
            const spanElement = $('<span>');
 
            if (section.items && section.items.length > 0) {
                aElement.text(`${section.section}`);
                spanElement.text(' >');
            } else {
                aElement.text(section.section);
            }
 
            if (index === 0) {
                aElement.addClass('activeEle');
            }
 
            liElement.append(aElement);
            liElement.append(spanElement);
           if ($(window).width() <= 767) {
              liElement.addClass('accordion-item');
              liElement.click(() => {
              liElement.toggleClass('active').siblings().removeClass('active');
             const panel = liElement.next();
             panel.slideToggle().siblings('.accordion-item').slideUp();
            });
         } 
            liElement.click(() => {
              $('.mega-menu-left .mega-menu-items a').removeClass('activeEle');
 
              // Add the activeEle class to the clicked anchor tag
              aElement.addClass('activeEle');
              showSubMenu(section)
               console.log('ele', index, section);
            });
            ulElement.append(liElement);
        });
 
        megaMenuItems.append(ulElement);
 
        whatWeDo.sections && showSubMenu(whatWeDo.sections[0]);
    }
 
    function showSubMenu(section) {
        const megaSubMenuItems = $('.mega-menu-left .mega-sub-menu-items');
        megaSubMenuItems.empty();
 
//        let activeSubMenu = null; 
        section.items.forEach(item => {
            const subMenuItem = $('<h5>');
            subMenuItem.text(item.name);
            megaSubMenuItems.append(subMenuItem);
 
            if (item.items && item.items.length > 0) {
              const itemList = $('<ul class="accordion">');
//                 const itemList = $('<ul>');
                item.items.forEach(subItem => {
                    const listItem = $('<li>');
                    const aElement = $('<a>');
                    const spanElement = $('<span>');
//                      let activeSubMenu = null;
 
                    if (subItem.items && subItem.items.length > 0) {
                       console.log("check items", subItem, item.items);
                       aElement.text(`${subItem.name}`);
                       aElement.attr('href',subItem.url);
                        spanElement.text(' >');
                        listItem.append(aElement);
                        listItem.append(spanElement);
                        listItem.click(() => {
                          toggleAccordion(listItem);
                          showNestedSubMenu(subItem);
                          const megaNestedSubMenu = $('.mega-menu-left .mega-nested-sub-menu');
                          listItem.append(megaNestedSubMenu);
                          console.log('ele',section);
                        });
                    }
                    else {
                        aElement.text(subItem.name);
                        aElement.attr('href',subItem.url);
                        listItem.append(aElement);
                    }

 
                    listItem.click(() => showAsideItems(subItem));
                    itemList.append(listItem);
                });
                megaSubMenuItems.append(itemList);
            }
        });
 
        if (section.items[0].items && section.items[0].items.length > 0) {
            showAsideItems(section.items[0].items[0]);
        }
    }

    function showNestedSubMenu(section){
      const megaNestedSubMenu = $('.mega-menu-left .mega-nested-sub-menu');
      // Clear existing content
  //     megaNestedSubMenu.empty();
      console.log("showNestedSubMenu", section);
      const ulElement = $('<ul>');
      section.items.forEach(item => {
        console.log(item, section.items);
              const listItem = $('<li>');
              const aElement = $('<a>');
              aElement.text(item.name);
              listItem.append(aElement);
              ulElement.append(listItem);
      });
  //     megaNestedSubMenu.append(ulElement);
      megaNestedSubMenu.empty().append(ulElement);
      megaNestedSubMenu.addClass('active');
      
    }
    function toggleAccordion(listItem) {
      listItem.toggleClass('active');
      const siblings = listItem.siblings();
      siblings.removeClass('active');
    }
  
    function showAsideItems(item) {
        console.log("item", item);
        const megaAsideItems = $('.mega-menu .mega-aside-items');
        megaAsideItems.empty();
 
        if (item.details) {
            const detailsItem = $('<div>');
            const imgEle = $('<img>');
            const descEle = $('<p>');
            const aEle = $('<a>');
            const titleEle = $('<h5>');
            imgEle.attr('src', item.details.imgUrl);
            descEle.text(item.details.description);
            aEle.text(item.details.btn);
            aEle.attr('href', item.details.btnLink);
            detailsItem.append(imgEle);
            detailsItem.append(descEle);
            detailsItem.append(aEle);
            megaAsideItems.append(detailsItem);
        }
    }
   if ($(window).width() <= 767) {
        $('body').css('overflow', 'hidden'); // Disable scrolling on mobile
    }
   $(window).on("resize", handleViewChange);
  handleViewChange();
 
  function handleViewChange() {
    if (isMobileView()) {
      // Adjustments for mobile view
      $(".mega-sub-menu-items ul").css("position", "relative");
      $(".mega-sub-menu-items ul").css("top", "0");
 
      $(".mega-sub-menu-items li").click(function () {
        const subMenuPosition = $(this).position().top;
        $(".mega-sub-menu-items ul").css("top", `-${subMenuPosition}px`);
      });
    } else {
      // Adjustments for desktop view
      $(".mega-sub-menu-items ul").css("position", "static");
      $(".mega-sub-menu-items ul").css("top", "0");
      showMegaMenu(); // Call this function for desktop view if needed
    }
  }
 
  function isMobileView() {
    return $(window).width() <= 767;
  }
 
  // Add this code for scrolling on mobile
  $(".mega-sub-menu-items").on("scroll", function () {
    if ($(this).scrollTop() + $(this).innerHeight() >= $(this)[0].scrollHeight) {
      $('body').css('overflow', 'auto'); // Enable scrolling when reached the bottom
    } else {
      $('body').css('overflow', 'hidden'); // Disable scrolling otherwise
    }
  });
});
 